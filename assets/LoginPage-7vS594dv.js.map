{"version":3,"file":"LoginPage-7vS594dv.js","sources":["../../src/pages/cms/LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n    <div class=\"max-w-md w-full space-y-8\">\n      <div>\n        <h2 class=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">Sign in to CMS</h2>\n      </div>\n      <form class=\"mt-8 space-y-6\" @submit.prevent=\"login\">\n        <div class=\"rounded-md shadow-sm -space-y-px\">\n          <div>\n            <label for=\"username\" class=\"sr-only\">Username</label>\n            <input v-model=\"username\" id=\"username\" name=\"username\" type=\"text\" required class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\" placeholder=\"Username\">\n          </div>\n          <div>\n            <label for=\"password\" class=\"sr-only\">Password</label>\n            <input v-model=\"password\" id=\"password\" name=\"password\" type=\"password\" required class=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\" placeholder=\"Password\">\n          </div>\n        </div>\n\n        <div v-if=\"error\" class=\"text-red-500 text-sm text-center\">{{ error }}</div>\n\n        <div>\n          <button type=\"submit\" class=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\n            Sign in\n          </button>\n        </div>\n        <div class=\"text-center\">\n          <router-link to=\"/register\" class=\"text-indigo-600 hover:text-indigo-500\">Need an account? Register</router-link>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nconst username = ref('');\nconst password = ref('');\nconst error = ref('');\nconst router = useRouter();\n\nconst login = async () => {\n  try {\n    const apiBase = (import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000').replace(/\\/$/, '');\n    const res = await fetch(`${apiBase}/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ username: username.value, password: password.value })\n    });\n\n    if (!res.ok) {\n      const msg = await res.text();\n      throw new Error(msg);\n    }\n\n    const data = await res.json();\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('role', data.role);\n    \n    // Redirect based on role\n    if (data.role === 'admin') {\n      router.push('/admin/dashboard');\n    } else {\n      router.push('/dashboard');\n    }\n  } catch (e: any) {\n    error.value = e.message;\n  }\n};\n</script>\n"],"names":["username","ref","password","error","router","useRouter","login","apiBase","res","msg","data","e","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$event","_hoisted_4","_toDisplayString","_hoisted_5","_createVNode","_component_router_link","_cache"],"mappings":"+aAqCA,MAAMA,EAAWC,EAAI,EAAE,EACjBC,EAAWD,EAAI,EAAE,EACjBE,EAAQF,EAAI,EAAE,EACdG,EAASC,EAAA,EAETC,EAAQ,SAAY,CACxB,GAAI,CACF,MAAMC,EAAW,+DAA8D,QAAQ,MAAO,EAAE,EAC1FC,EAAM,MAAM,MAAM,GAAGD,CAAO,cAAe,CAC/C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,SAAUP,EAAS,MAAO,SAAUE,EAAS,KAAA,CAAO,CAAA,CAC5E,EAED,GAAI,CAACM,EAAI,GAAI,CACX,MAAMC,EAAM,MAAMD,EAAI,KAAA,EACtB,MAAM,IAAI,MAAMC,CAAG,CACrB,CAEA,MAAMC,EAAO,MAAMF,EAAI,KAAA,EACvB,aAAa,QAAQ,QAASE,EAAK,KAAK,EACxC,aAAa,QAAQ,OAAQA,EAAK,IAAI,EAGlCA,EAAK,OAAS,QAChBN,EAAO,KAAK,kBAAkB,EAE9BA,EAAO,KAAK,YAAY,CAE5B,OAASO,EAAQ,CACfR,EAAM,MAAQQ,EAAE,OAClB,CACF,yCApEE,OAAAC,EAAA,EAAAC,EA6BM,MA7BNC,EA6BM,CA5BJC,EA2BM,MA3BNC,EA2BM,aA1BJD,EAEM,MAAA,KAAA,CADJA,EAAsF,KAAA,CAAlF,MAAM,wDAAA,EAAyD,gBAAc,CAAA,OAEnFA,EAsBO,OAAA,CAtBD,MAAM,iBAAkB,WAAgBT,EAAK,CAAA,SAAA,CAAA,CAAA,GACjDS,EASM,MATNE,EASM,CARJF,EAGM,MAAA,KAAA,aAFJA,EAAsD,QAAA,CAA/C,IAAI,WAAW,MAAM,SAAA,EAAU,WAAQ,EAAA,KAC9CA,EAAuU,QAAA,sCAAvTf,EAAQ,MAAAkB,GAAE,GAAG,WAAW,KAAK,WAAW,KAAK,OAAO,SAAA,GAAS,MAAM,6NAA6N,YAAY,UAAA,gBAA5SlB,EAAA,KAAQ,CAAA,KAE1Be,EAGM,MAAA,KAAA,aAFJA,EAAsD,QAAA,CAA/C,IAAI,WAAW,MAAM,SAAA,EAAU,WAAQ,EAAA,KAC9CA,EAA2U,QAAA,sCAA3Tb,EAAQ,MAAAgB,GAAE,GAAG,WAAW,KAAK,WAAW,KAAK,WAAW,SAAA,GAAS,MAAM,6NAA6N,YAAY,UAAA,gBAAhThB,EAAA,KAAQ,CAAA,OAIjBC,EAAA,WAAXU,EAA4E,MAA5EM,EAA4EC,EAAdjB,EAAA,KAAK,EAAA,CAAA,wBAEnEY,EAIM,MAAA,KAAA,CAHJA,EAES,SAAA,CAFD,KAAK,SAAS,MAAM,qOAAA,EAAsO,WAElQ,CAAA,OAEFA,EAEM,MAFNM,EAEM,CADJC,EAAiHC,EAAA,CAApG,GAAG,YAAY,MAAM,uCAAA,aAAwC,IAAyB,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAzB,4BAAyB,EAAA,CAAA"}
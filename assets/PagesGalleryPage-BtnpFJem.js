import{d as _,l as C,o as a,k as T,e as V,j as x,a as e,c as n,m as c,t as g,F as m,h as i,v as d,q as U,i as b,p as B}from"./index-BnoIOtV8.js";import{_ as P}from"./ManagerLayout.vue_vue_type_script_setup_true_lang-B6YqwWYP.js";const M={class:"px-4 py-6 sm:px-0"},$={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},j={class:"px-4 py-5 sm:p-6"},D={class:"text-lg font-medium text-gray-900 truncate"},L={class:"mt-1 text-sm text-gray-500"},A={class:"mt-1 text-xs text-gray-400"},N={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4"},S={class:"bg-white rounded-lg max-w-lg w-full p-6"},I={class:"space-y-4"},z={key:0,class:"border p-4 rounded-md"},F=["onUpdate:modelValue"],E=["onUpdate:modelValue"],G={key:1,class:"border p-4 rounded-md"},O=["onUpdate:modelValue"],R={class:"flex gap-2"},q=["onUpdate:modelValue"],J=["onUpdate:modelValue"],W={class:"mt-6 flex justify-end space-x-3"},K=_({__name:"PagesGalleryPage",setup(X){const f=x([]),r=x(!1),s=B({title:"",pageType:"cards",config:{cards:[],annotations:[],image:""}}),y=async()=>{const p=localStorage.getItem("token"),t="https://20nfauw0la.execute-api.ap-northeast-2.amazonaws.com/".replace(/\/$/,""),o=await fetch(`${t}/manager/pages`,{headers:{Authorization:`Bearer ${p}`}});o.ok&&(f.value=await o.json())},v=()=>{s.title="",s.pageType="cards",s.config={cards:[],annotations:[],image:""},r.value=!0},h=()=>{s.config.cards.push({title:"New Card",description:"Description",icon:"star"})},w=()=>{s.config.annotations.push({title:"Label",x:50,y:50,content:"Details"})},k=async()=>{const p=localStorage.getItem("token"),t={};s.pageType==="cards"?t.cards=s.config.cards:s.pageType==="labeled"&&(t.image=s.config.image,t.annotations=s.config.annotations),t.id="page_"+Date.now(),t.title=s.title,t.pageType=s.pageType;const o="https://20nfauw0la.execute-api.ap-northeast-2.amazonaws.com/".replace(/\/$/,"");(await fetch(`${o}/manager/pages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({title:s.title,pageType:s.pageType,config:t})})).ok?(r.value=!1,y()):alert("Failed to create page")};return C(y),(p,t)=>(a(),T(P,null,{default:V(()=>[e("div",M,[e("div",{class:"flex justify-between items-center mb-6"},[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Page Gallery",-1)),e("button",{onClick:v,class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"},"Create New Page")]),e("div",$,[(a(!0),n(m,null,c(f.value,o=>(a(),n("div",{key:o._id,class:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow"},[e("div",j,[e("h3",D,g(o.title),1),e("p",L,"Type: "+g(o.pageType),1),e("p",A,"ID: "+g(o._id),1)]),t[5]||(t[5]=e("div",{class:"bg-gray-50 px-4 py-4 sm:px-6 flex justify-end"},[e("button",{class:"text-indigo-600 hover:text-indigo-900 text-sm font-medium"},"Edit")],-1))]))),128))]),r.value?(a(),n("div",N,[e("div",S,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium mb-4"},"Create New Page",-1)),e("div",I,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.title=o),type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[d,s.title]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Page Type",-1)),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.pageType=o),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...t[7]||(t[7]=[e("option",{value:"cards"},"Cards",-1),e("option",{value:"labeled"},"Labeled (Image)",-1),e("option",{value:"bigTitle"},"Big Title",-1),e("option",{value:"master-bullets"},"Master Bullets",-1),e("option",{value:"roleMapping"},"Role Mapping",-1),e("option",{value:"wordCloud"},"Word Cloud",-1),e("option",{value:"list"},"List",-1)])],512),[[U,s.pageType]])]),s.pageType==="cards"?(a(),n("div",z,[t[9]||(t[9]=e("p",{class:"text-sm font-bold mb-2"},"Cards Configuration",-1)),e("button",{onClick:h,class:"text-xs bg-gray-200 px-2 py-1 rounded"},"Add Card"),(a(!0),n(m,null,c(s.config.cards,(o,u)=>(a(),n("div",{key:u,class:"mt-2 text-sm border-t pt-2"},[i(e("input",{"onUpdate:modelValue":l=>o.title=l,placeholder:"Card Title",class:"block w-full border mb-1 p-1"},null,8,F),[[d,o.title]]),i(e("input",{"onUpdate:modelValue":l=>o.description=l,placeholder:"Description",class:"block w-full border mb-1 p-1"},null,8,E),[[d,o.description]])]))),128))])):b("",!0),s.pageType==="labeled"?(a(),n("div",G,[t[10]||(t[10]=e("p",{class:"text-sm font-bold mb-2"},"Labeled Configuration",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.config.image=o),placeholder:"Image URL",class:"block w-full border mb-2 p-1"},null,512),[[d,s.config.image]]),e("button",{onClick:w,class:"text-xs bg-gray-200 px-2 py-1 rounded"},"Add Annotation"),(a(!0),n(m,null,c(s.config.annotations,(o,u)=>(a(),n("div",{key:u,class:"mt-2 text-sm border-t pt-2"},[i(e("input",{"onUpdate:modelValue":l=>o.title=l,placeholder:"Label Title",class:"block w-full border mb-1 p-1"},null,8,O),[[d,o.title]]),e("div",R,[i(e("input",{"onUpdate:modelValue":l=>o.x=l,type:"number",placeholder:"X %",class:"w-1/2 border p-1"},null,8,q),[[d,o.x,void 0,{number:!0}]]),i(e("input",{"onUpdate:modelValue":l=>o.y=l,type:"number",placeholder:"Y %",class:"w-1/2 border p-1"},null,8,J),[[d,o.y,void 0,{number:!0}]])])]))),128))])):b("",!0)]),e("div",W,[e("button",{onClick:t[3]||(t[3]=o=>r.value=!1),class:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50"},"Cancel"),e("button",{onClick:k,class:"bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700"},"Create")])])])):b("",!0)])]),_:1}))}});export{K as default};

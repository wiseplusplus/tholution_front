{"version":3,"file":"PagesGalleryPage-BtnpFJem.js","sources":["../../src/pages/cms/PagesGalleryPage.vue"],"sourcesContent":["<template>\n  <ManagerLayout>\n    <div class=\"px-4 py-6 sm:px-0\">\n      <div class=\"flex justify-between items-center mb-6\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Page Gallery</h1>\n        <button @click=\"openCreateModal\" class=\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700\">Create New Page</button>\n      </div>\n\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div v-for=\"page in pages\" :key=\"page._id\" class=\"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <h3 class=\"text-lg font-medium text-gray-900 truncate\">{{ page.title }}</h3>\n            <p class=\"mt-1 text-sm text-gray-500\">Type: {{ page.pageType }}</p>\n            <p class=\"mt-1 text-xs text-gray-400\">ID: {{ page._id }}</p>\n          </div>\n          <div class=\"bg-gray-50 px-4 py-4 sm:px-6 flex justify-end\">\n            <button class=\"text-indigo-600 hover:text-indigo-900 text-sm font-medium\">Edit</button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Create Modal -->\n      <div v-if=\"showModal\" class=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4\">\n        <div class=\"bg-white rounded-lg max-w-lg w-full p-6\">\n          <h3 class=\"text-lg font-medium mb-4\">Create New Page</h3>\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700\">Title</label>\n              <input v-model=\"newPage.title\" type=\"text\" class=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\">\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700\">Page Type</label>\n              <select v-model=\"newPage.pageType\" class=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\">\n                <option value=\"cards\">Cards</option>\n                <option value=\"labeled\">Labeled (Image)</option>\n                <option value=\"bigTitle\">Big Title</option>\n                <option value=\"master-bullets\">Master Bullets</option>\n                <option value=\"roleMapping\">Role Mapping</option>\n                <option value=\"wordCloud\">Word Cloud</option>\n                <option value=\"list\">List</option>\n              </select>\n            </div>\n            \n            <!-- Dynamic Fields based on Type -->\n            <div v-if=\"newPage.pageType === 'cards'\" class=\"border p-4 rounded-md\">\n              <p class=\"text-sm font-bold mb-2\">Cards Configuration</p>\n              <button @click=\"addCard\" class=\"text-xs bg-gray-200 px-2 py-1 rounded\">Add Card</button>\n              <div v-for=\"(card, idx) in newPage.config.cards\" :key=\"idx\" class=\"mt-2 text-sm border-t pt-2\">\n                <input v-model=\"card.title\" placeholder=\"Card Title\" class=\"block w-full border mb-1 p-1\">\n                <input v-model=\"card.description\" placeholder=\"Description\" class=\"block w-full border mb-1 p-1\">\n              </div>\n            </div>\n            \n             <div v-if=\"newPage.pageType === 'labeled'\" class=\"border p-4 rounded-md\">\n              <p class=\"text-sm font-bold mb-2\">Labeled Configuration</p>\n              <input v-model=\"newPage.config.image\" placeholder=\"Image URL\" class=\"block w-full border mb-2 p-1\">\n              <button @click=\"addAnnotation\" class=\"text-xs bg-gray-200 px-2 py-1 rounded\">Add Annotation</button>\n              <div v-for=\"(ann, idx) in newPage.config.annotations\" :key=\"idx\" class=\"mt-2 text-sm border-t pt-2\">\n                <input v-model=\"ann.title\" placeholder=\"Label Title\" class=\"block w-full border mb-1 p-1\">\n                <div class=\"flex gap-2\">\n                   <input v-model.number=\"ann.x\" type=\"number\" placeholder=\"X %\" class=\"w-1/2 border p-1\">\n                   <input v-model.number=\"ann.y\" type=\"number\" placeholder=\"Y %\" class=\"w-1/2 border p-1\">\n                </div>\n              </div>\n            </div>\n\n          </div>\n          <div class=\"mt-6 flex justify-end space-x-3\">\n            <button @click=\"showModal = false\" class=\"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50\">Cancel</button>\n            <button @click=\"createPage\" class=\"bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700\">Create</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ManagerLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, reactive } from 'vue';\nimport ManagerLayout from '@/layouts/ManagerLayout.vue';\n\nconst pages = ref<any[]>([]);\nconst showModal = ref(false);\n\nconst newPage = reactive({\n  title: '',\n  pageType: 'cards',\n  config: {\n    cards: [] as any[],\n    annotations: [] as any[],\n    image: ''\n  }\n});\n\nconst fetchPages = async () => {\n  const token = localStorage.getItem('token');\n  const apiBase = (import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000').replace(/\\/$/, '');\n  const res = await fetch(`${apiBase}/manager/pages`, {\n    headers: { 'Authorization': `Bearer ${token}` }\n  });\n  if (res.ok) {\n    pages.value = await res.json();\n  }\n};\n\nconst openCreateModal = () => {\n  newPage.title = '';\n  newPage.pageType = 'cards';\n  newPage.config = { cards: [], annotations: [], image: '' };\n  showModal.value = true;\n};\n\nconst addCard = () => {\n  newPage.config.cards.push({ title: 'New Card', description: 'Description', icon: 'star' });\n};\n\nconst addAnnotation = () => {\n  newPage.config.annotations.push({ title: 'Label', x: 50, y: 50, content: 'Details' });\n};\n\nconst createPage = async () => {\n  const token = localStorage.getItem('token');\n  \n  // Clean config based on type\n  const finalConfig: any = {};\n  if (newPage.pageType === 'cards') {\n    finalConfig.cards = newPage.config.cards;\n  } else if (newPage.pageType === 'labeled') {\n    finalConfig.image = newPage.config.image;\n    finalConfig.annotations = newPage.config.annotations;\n  }\n  // Add other basic fields required by template renderers\n  finalConfig.id = 'page_' + Date.now();\n  finalConfig.title = newPage.title;\n  finalConfig.pageType = newPage.pageType;\n\n  const apiBase = (import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000').replace(/\\/$/, '');\n  const res = await fetch(`${apiBase}/manager/pages`, {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}` \n    },\n    body: JSON.stringify({\n      title: newPage.title,\n      pageType: newPage.pageType,\n      config: finalConfig\n    })\n  });\n\n  if (res.ok) {\n    showModal.value = false;\n    fetchPages();\n  } else {\n    alert('Failed to create page');\n  }\n};\n\nonMounted(fetchPages);\n</script>"],"names":["pages","ref","showModal","newPage","reactive","fetchPages","token","apiBase","res","openCreateModal","addCard","addAnnotation","createPage","finalConfig","onMounted","_createBlock","ManagerLayout","_createElementVNode","_hoisted_1","_cache","_hoisted_2","_createElementBlock","_Fragment","_renderList","page","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_openBlock","_hoisted_7","_hoisted_8","_hoisted_9","$event","_vModelText","_vModelSelect","_hoisted_10","card","idx","_hoisted_13","ann","_hoisted_15","_hoisted_18"],"mappings":"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"}
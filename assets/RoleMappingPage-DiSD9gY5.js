import{d as G,l as H,o as l,c as r,a as o,t as c,i as O,F as y,m as b,s as d,A as z,j as v}from"./index-BnoIOtV8.js";const P={class:"h-full w-full flex flex-col items-center justify-center bg-slate-50 p-8"},S={class:"max-w-5xl w-full h-full flex flex-col"},J={class:"mb-12 text-center shrink-0"},K={class:"text-3xl font-bold text-slate-900 mb-2"},Q={key:0,class:"text-slate-500"},U={class:"absolute inset-0 w-full h-full pointer-events-none z-0"},W=["d"],X=["d"],Y={class:"grid grid-cols-3 gap-8 w-full max-w-4xl z-10"},Z={class:"space-y-6 flex flex-col justify-center"},ee=["onMouseenter"],te={class:"font-bold text-slate-900"},se={class:"text-xs text-slate-500 mt-1 uppercase tracking-wide"},oe={class:"space-y-6 flex flex-col justify-center"},ne=["onMouseenter"],ie={class:"font-bold text-slate-900"},le={class:"text-xs text-slate-500 mt-1 uppercase tracking-wide"},ae=G({__name:"RoleMappingPage",props:{config:{type:Object,required:!0}},setup(g){var j,L;const x=g,n=v(null),m=v([]),R=v([]),k=v([]),_=v(null),D=(t,s)=>{t&&(R.value[s]=t)},F=(t,s)=>{t&&(k.value[s]=t)},f=t=>{var a,i,h,p;if(!n.value)return!1;if(t===n.value)return!0;const s=(a=x.config.roles)==null?void 0:a.find(u=>u.id===n.value);if(s&&((i=s.mapTo)!=null&&i.includes(t)))return!0;const e=(h=x.config.roles)==null?void 0:h.find(u=>u.id===t);return!!(e&&((p=e.mapTo)!=null&&p.includes(n.value)))},C=t=>n.value?!f(t):!1,M=((j=x.config.roles)==null?void 0:j.filter(t=>t.side==="left"))||[],B=((L=x.config.roles)==null?void 0:L.filter(t=>t.side==="right"))||[],E=()=>{const t=[];M.forEach((s,e)=>{const a=R.value[e];a&&s.mapTo.forEach(i=>{const h=B.findIndex(q=>q.id===i);if(h===-1)return;const p=k.value[h];if(!p||!_.value)return;const u=_.value.getBoundingClientRect(),$=a.getBoundingClientRect(),w=p.getBoundingClientRect(),A=$.right-u.left,I=$.top+$.height/2-u.top,N=w.left-u.left,V=w.top+w.height/2-u.top;t.push({x1:A,y1:I,x2:N,y2:V,active:!1,id:`${s.id}-${i}`})})}),m.value=t},T=t=>{if(!n.value)return!1;const[s,e]=t.split("-");return s==n.value||e==n.value};return H(()=>{setTimeout(E,100),window.addEventListener("resize",E)}),(t,s)=>(l(),r("div",P,[o("div",S,[o("div",J,[o("h2",K,c(g.config.title),1),g.config.subTitle?(l(),r("p",Q,c(g.config.subTitle),1)):O("",!0)]),o("div",{ref_key:"containerRef",ref:_,class:"flex-1 flex items-center justify-center relative min-h-[400px]"},[(l(),r("svg",U,[s[2]||(s[2]=o("defs",null,[o("linearGradient",{id:"line-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[o("stop",{offset:"0%","stop-color":"#3B82F6"}),o("stop",{offset:"100%","stop-color":"#22C55E"})])],-1)),(l(!0),r(y,null,b(m.value,e=>(l(),r("path",{key:`base-${e.id}`,d:`M ${e.x1} ${e.y1} C ${e.x1+50} ${e.y1}, ${e.x2-50} ${e.y2}, ${e.x2} ${e.y2}`,fill:"none",stroke:"#CBD5E1","stroke-width":"2",class:d(["transition-opacity duration-300",n.value?T(e.id)?"opacity-0":"opacity-10":"opacity-20"])},null,10,W))),128)),(l(!0),r(y,null,b(m.value,e=>(l(),r("path",{key:`active-${e.id}`,d:`M ${e.x1} ${e.y1} C ${e.x1+50} ${e.y1}, ${e.x2-50} ${e.y2}, ${e.x2} ${e.y2}`,fill:"none",stroke:"url(#line-gradient)","stroke-width":"3",class:d(["transition-all duration-300",T(e.id)?"opacity-100":"opacity-0"]),"stroke-dasharray":"1000","stroke-dashoffset":"0"},null,10,X))),128))])),o("div",Y,[o("div",Z,[(l(!0),r(y,null,b(z(M),(e,a)=>(l(),r("div",{key:e.id,ref_for:!0,ref:i=>D(i,a),class:d(["group relative bg-white p-5 rounded-xl shadow-sm border border-slate-200 transition-all duration-300 cursor-default",{"border-blue-500 shadow-md scale-[1.05]":f(e.id),"opacity-40 blur-[1px]":C(e.id)}]),onMouseenter:i=>n.value=e.id,onMouseleave:s[0]||(s[0]=i=>n.value=null)},[o("h3",te,c(e.title),1),o("p",se,c(e.subTitle),1),o("div",{class:d(["absolute top-1/2 -right-1.5 w-3 h-3 rounded-full border-2 border-white transition-colors duration-300",f(e.id)?"bg-blue-500":"bg-slate-300"])},null,2)],42,ee))),128))]),s[3]||(s[3]=o("div",{class:"flex items-center justify-center opacity-0 pointer-events-none"},null,-1)),o("div",oe,[(l(!0),r(y,null,b(z(B),(e,a)=>(l(),r("div",{key:e.id,ref_for:!0,ref:i=>F(i,a),class:d(["group relative bg-white p-5 rounded-xl shadow-sm border border-slate-200 transition-all duration-300 cursor-default",{"border-green-500 shadow-md scale-[1.05]":f(e.id),"opacity-40 blur-[1px]":C(e.id)}]),onMouseenter:i=>n.value=e.id,onMouseleave:s[1]||(s[1]=i=>n.value=null)},[o("h3",ie,c(e.title),1),o("p",le,c(e.subTitle),1),o("div",{class:d(["absolute top-1/2 -left-1.5 w-3 h-3 rounded-full border-2 border-white transition-colors duration-300",f(e.id)?"bg-green-500":"bg-slate-300"])},null,2)],42,ne))),128))])])],512)])]))}});export{ae as default};

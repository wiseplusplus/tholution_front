{"version":3,"file":"RoleMappingPage-DiSD9gY5.js","sources":["../../src/templates/RoleMappingPage.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { PropType } from 'vue'\nimport type { PageConfig, Role } from '@/types'\nimport { ref, onMounted, nextTick, watch } from 'vue'\n\nconst props = defineProps({\n  config: {\n    type: Object as PropType<PageConfig>,\n    required: true\n  }\n})\n\nconst hoveredRoleId = ref<string | number | null>(null)\nconst connectionLines = ref<{ x1: number, y1: number, x2: number, y2: number, active: boolean, id: string }[]>([])\nconst leftRefs = ref<HTMLElement[]>([])\nconst rightRefs = ref<HTMLElement[]>([])\nconst containerRef = ref<HTMLElement | null>(null)\n\n// Helper to set ref in v-for\nconst setLeftRef = (el: any, index: number) => {\n  if (el) leftRefs.value[index] = el\n}\nconst setRightRef = (el: any, index: number) => {\n  if (el) rightRefs.value[index] = el\n}\n\nconst isHighlighted = (roleId: string | number) => {\n  if (!hoveredRoleId.value) return false\n  \n  if (roleId === hoveredRoleId.value) return true\n  \n  const hoveredRole = props.config.roles?.find(r => r.id === hoveredRoleId.value)\n  if (hoveredRole && hoveredRole.mapTo?.includes(roleId)) return true\n  \n  const currentRole = props.config.roles?.find(r => r.id === roleId)\n  if (currentRole && currentRole.mapTo?.includes(hoveredRoleId.value)) return true\n  \n  return false\n}\n\nconst isDimmed = (roleId: string | number) => {\n  if (!hoveredRoleId.value) return false\n  return !isHighlighted(roleId)\n}\n\nconst leftRoles = props.config.roles?.filter(r => r.side === 'left') || []\nconst rightRoles = props.config.roles?.filter(r => r.side === 'right') || []\n\nconst updateConnections = () => {\n  const lines: typeof connectionLines.value = []\n  \n  leftRoles.forEach((leftRole, leftIndex) => {\n    const leftEl = leftRefs.value[leftIndex]\n    if (!leftEl) return\n\n    leftRole.mapTo.forEach(targetId => {\n      const rightIndex = rightRoles.findIndex(r => r.id === targetId)\n      if (rightIndex === -1) return\n      \n      const rightEl = rightRefs.value[rightIndex]\n      if (!rightEl) return\n\n      // Get connection points relative to the SVG container\n      if (!containerRef.value) return\n      \n      const containerRect = containerRef.value.getBoundingClientRect()\n      const leftRect = leftEl.getBoundingClientRect()\n      const rightRect = rightEl.getBoundingClientRect()\n\n      // Connect from right side of left card to left side of right card\n      const x1 = leftRect.right - containerRect.left\n      const y1 = leftRect.top + leftRect.height / 2 - containerRect.top\n      const x2 = rightRect.left - containerRect.left\n      const y2 = rightRect.top + rightRect.height / 2 - containerRect.top\n\n      lines.push({\n        x1, y1, x2, y2,\n        active: false, // Calculated dynamically in template\n        id: `${leftRole.id}-${targetId}`\n      })\n    })\n  })\n  \n  connectionLines.value = lines\n}\n\nconst isLineActive = (lineId: string) => {\n  if (!hoveredRoleId.value) return false\n  const [sourceId, targetId] = lineId.split('-')\n  \n  // Highlight if hovered is source OR hovered is target of this specific line\n  return sourceId == hoveredRoleId.value || targetId == hoveredRoleId.value\n}\n\nonMounted(() => {\n  // Wait for layout\n  setTimeout(updateConnections, 100)\n  window.addEventListener('resize', updateConnections)\n})\n</script>\n\n<template>\n  <div class=\"h-full w-full flex flex-col items-center justify-center bg-slate-50 p-8\">\n    <div class=\"max-w-5xl w-full h-full flex flex-col\">\n      <div class=\"mb-12 text-center shrink-0\">\n        <h2 class=\"text-3xl font-bold text-slate-900 mb-2\">{{ config.title }}</h2>\n        <p v-if=\"config.subTitle\" class=\"text-slate-500\">{{ config.subTitle }}</p>\n      </div>\n\n      <div ref=\"containerRef\" class=\"flex-1 flex items-center justify-center relative min-h-[400px]\">\n        <!-- Connection Lines SVG Layer -->\n        <svg class=\"absolute inset-0 w-full h-full pointer-events-none z-0\">\n          <defs>\n             <!-- Gradient for active lines -->\n             <linearGradient id=\"line-gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n               <stop offset=\"0%\" stop-color=\"#3B82F6\" />\n               <stop offset=\"100%\" stop-color=\"#22C55E\" />\n             </linearGradient>\n          </defs>\n          \n          <!-- Base Lines (faint) -->\n          <path \n            v-for=\"line in connectionLines\"\n            :key=\"`base-${line.id}`\"\n            :d=\"`M ${line.x1} ${line.y1} C ${line.x1 + 50} ${line.y1}, ${line.x2 - 50} ${line.y2}, ${line.x2} ${line.y2}`\"\n            fill=\"none\"\n            stroke=\"#CBD5E1\"\n            stroke-width=\"2\"\n            class=\"transition-opacity duration-300\"\n            :class=\"hoveredRoleId ? (isLineActive(line.id) ? 'opacity-0' : 'opacity-10') : 'opacity-20'\"\n          />\n\n          <!-- Active Lines (highlighted) -->\n          <path \n            v-for=\"line in connectionLines\"\n            :key=\"`active-${line.id}`\"\n            :d=\"`M ${line.x1} ${line.y1} C ${line.x1 + 50} ${line.y1}, ${line.x2 - 50} ${line.y2}, ${line.x2} ${line.y2}`\"\n            fill=\"none\"\n            stroke=\"url(#line-gradient)\"\n            stroke-width=\"3\"\n            class=\"transition-all duration-300\"\n            :class=\"isLineActive(line.id) ? 'opacity-100' : 'opacity-0'\"\n            stroke-dasharray=\"1000\"\n            stroke-dashoffset=\"0\"\n          />\n        </svg>\n\n        <div class=\"grid grid-cols-3 gap-8 w-full max-w-4xl z-10\">\n          <!-- Left Column: Products -->\n          <div class=\"space-y-6 flex flex-col justify-center\">\n            <div \n              v-for=\"(role, index) in leftRoles\" \n              :key=\"role.id\"\n              :ref=\"(el) => setLeftRef(el, index)\"\n              class=\"group relative bg-white p-5 rounded-xl shadow-sm border border-slate-200 transition-all duration-300 cursor-default\"\n              :class=\"{ \n                'border-blue-500 shadow-md scale-[1.05]': isHighlighted(role.id),\n                'opacity-40 blur-[1px]': isDimmed(role.id)\n              }\"\n              @mouseenter=\"hoveredRoleId = role.id\"\n              @mouseleave=\"hoveredRoleId = null\"\n            >\n              <h3 class=\"font-bold text-slate-900\">{{ role.title }}</h3>\n              <p class=\"text-xs text-slate-500 mt-1 uppercase tracking-wide\">{{ role.subTitle }}</p>\n              \n              <!-- Connection Point -->\n              <div \n                class=\"absolute top-1/2 -right-1.5 w-3 h-3 rounded-full border-2 border-white transition-colors duration-300\"\n                :class=\"isHighlighted(role.id) ? 'bg-blue-500' : 'bg-slate-300'\"\n              ></div>\n            </div>\n          </div>\n\n          <!-- Middle: Visual Connection Area -->\n          <div class=\"flex items-center justify-center opacity-0 pointer-events-none\">\n             <!-- Spacer only -->\n          </div>\n\n          <!-- Right Column: Roles -->\n          <div class=\"space-y-6 flex flex-col justify-center\">\n            <div \n              v-for=\"(role, index) in rightRoles\" \n              :key=\"role.id\"\n              :ref=\"(el) => setRightRef(el, index)\"\n              class=\"group relative bg-white p-5 rounded-xl shadow-sm border border-slate-200 transition-all duration-300 cursor-default\"\n              :class=\"{ \n                'border-green-500 shadow-md scale-[1.05]': isHighlighted(role.id),\n                'opacity-40 blur-[1px]': isDimmed(role.id)\n              }\"\n              @mouseenter=\"hoveredRoleId = role.id\"\n              @mouseleave=\"hoveredRoleId = null\"\n            >\n              <h3 class=\"font-bold text-slate-900\">{{ role.title }}</h3>\n              <p class=\"text-xs text-slate-500 mt-1 uppercase tracking-wide\">{{ role.subTitle }}</p>\n\n              <!-- Connection Point -->\n              <div \n                class=\"absolute top-1/2 -left-1.5 w-3 h-3 rounded-full border-2 border-white transition-colors duration-300\"\n                :class=\"isHighlighted(role.id) ? 'bg-green-500' : 'bg-slate-300'\"\n              ></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>"],"names":["props","__props","hoveredRoleId","ref","connectionLines","leftRefs","rightRefs","containerRef","setLeftRef","el","index","setRightRef","isHighlighted","roleId","hoveredRole","_a","r","_b","currentRole","_c","_d","isDimmed","leftRoles","rightRoles","updateConnections","lines","leftRole","leftIndex","leftEl","targetId","rightIndex","rightEl","containerRect","leftRect","rightRect","x1","y1","x2","y2","isLineActive","lineId","sourceId","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_Fragment","_renderList","line","_normalizeClass","_hoisted_9","_hoisted_10","_unref","role","$event","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17"],"mappings":"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"}
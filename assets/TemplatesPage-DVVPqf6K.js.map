{"version":3,"file":"TemplatesPage-DVVPqf6K.js","sources":["../../src/pages/cms/TemplatesPage.vue"],"sourcesContent":["<template>\n  <ManagerLayout>\n    <div class=\"px-4 py-6 sm:px-0\">\n      <div class=\"flex justify-between items-center mb-6\">\n        <h1 class=\"text-2xl font-bold text-gray-900\">Templates</h1>\n        <button @click=\"openCreateModal\" class=\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700\">Create New Template</button>\n      </div>\n\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div v-for=\"tpl in templates\" :key=\"tpl._id\" class=\"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <h3 class=\"text-lg font-medium text-gray-900 truncate\">{{ tpl.title }}</h3>\n            <p class=\"mt-1 text-sm text-gray-500\">{{ tpl.description }}</p>\n            <p class=\"mt-2 text-xs text-gray-400\">Pages: {{ tpl.pages ? tpl.pages.length : 0 }}</p>\n          </div>\n          <div class=\"bg-gray-50 px-4 py-4 sm:px-6 flex justify-end\">\n             <!-- Future: Edit Template -->\n            <button class=\"text-indigo-600 hover:text-indigo-900 text-sm font-medium\">Edit</button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Create Modal -->\n      <div v-if=\"showModal\" class=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4\">\n        <div class=\"bg-white rounded-lg max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto\">\n          <h3 class=\"text-lg font-medium mb-4\">Create New Template</h3>\n          <div class=\"space-y-4\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700\">Title</label>\n              <input v-model=\"newTemplate.title\" type=\"text\" class=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\">\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700\">Description</label>\n              <textarea v-model=\"newTemplate.description\" class=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"></textarea>\n            </div>\n            \n            <div>\n              <label class=\"block text-sm font-medium text-gray-700\">Select Pages (Order matters)</label>\n              <div class=\"mt-2 max-h-40 overflow-y-auto border rounded-md p-2\">\n                <div v-for=\"page in allPages\" :key=\"page._id\" class=\"flex items-center py-1\">\n                  <input type=\"checkbox\" :value=\"page._id\" v-model=\"newTemplate.selectedPages\" class=\"h-4 w-4 text-indigo-600 border-gray-300 rounded\">\n                  <span class=\"ml-2 text-sm text-gray-900\">{{ page.title }} ({{ page.pageType }})</span>\n                </div>\n              </div>\n              <p class=\"text-xs text-gray-500 mt-1\">Check to add. Drag & Drop reordering not yet implemented.</p>\n            </div>\n\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700\">Theme Colors</label>\n              <div class=\"grid grid-cols-3 gap-2\">\n                <input v-model=\"newTemplate.globalConfig.themeColors.mainColor\" placeholder=\"Main Color\" class=\"border p-1 text-xs\">\n                <input v-model=\"newTemplate.globalConfig.themeColors.bgColor\" placeholder=\"Bg Color\" class=\"border p-1 text-xs\">\n                <input v-model=\"newTemplate.globalConfig.themeColors.tintColor\" placeholder=\"Tint Color\" class=\"border p-1 text-xs\">\n              </div>\n            </div>\n\n          </div>\n          <div class=\"mt-6 flex justify-end space-x-3\">\n            <button @click=\"showModal = false\" class=\"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50\">Cancel</button>\n            <button @click=\"createTemplate\" class=\"bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700\">Create</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ManagerLayout>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, reactive } from 'vue';\nimport ManagerLayout from '@/layouts/ManagerLayout.vue';\n\nconst templates = ref<any[]>([]);\nconst allPages = ref<any[]>([]);\nconst showModal = ref(false);\n\nconst newTemplate = reactive({\n  title: '',\n  description: '',\n  selectedPages: [] as string[],\n  globalConfig: {\n    themeColors: {\n      mainColor: '#4F46E5',\n      bgColor: '#FFFFFF',\n      tintColor: '#E0E7FF'\n    },\n    iconLibrary: {}\n  }\n});\n\nconst fetchTemplates = async () => {\n  const token = localStorage.getItem('token');\n  const apiBase = (import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000').replace(/\\/$/, '');\n  const res = await fetch(`${apiBase}/manager/templates`, {\n    headers: { 'Authorization': `Bearer ${token}` }\n  });\n  if (res.ok) {\n    templates.value = await res.json();\n  }\n};\n\nconst fetchPages = async () => {\n  const token = localStorage.getItem('token');\n  const apiBase = (import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000').replace(/\\/$/, '');\n  const res = await fetch(`${apiBase}/manager/pages`, {\n    headers: { 'Authorization': `Bearer ${token}` }\n  });\n  if (res.ok) {\n    allPages.value = await res.json();\n  }\n};\n\nconst openCreateModal = () => {\n  newTemplate.title = '';\n  newTemplate.description = '';\n  newTemplate.selectedPages = [];\n  fetchPages();\n  showModal.value = true;\n};\n\nconst createTemplate = async () => {\n  const token = localStorage.getItem('token');\n  const apiBase = (import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000').replace(/\\/$/, '');\n  const res = await fetch(`${apiBase}/manager/templates`, {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}` \n    },\n    body: JSON.stringify({\n      title: newTemplate.title,\n      description: newTemplate.description,\n      pages: newTemplate.selectedPages,\n      globalConfig: newTemplate.globalConfig\n    })\n  });\n\n  if (res.ok) {\n    showModal.value = false;\n    fetchTemplates();\n  } else {\n    alert('Failed to create template');\n  }\n};\n\nonMounted(fetchTemplates);\n</script>"],"names":["templates","ref","allPages","showModal","newTemplate","reactive","fetchTemplates","token","apiBase","res","fetchPages","openCreateModal","createTemplate","onMounted","_createBlock","ManagerLayout","_createElementVNode","_hoisted_1","_cache","_hoisted_2","_createElementBlock","_Fragment","_renderList","tpl","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_openBlock","_hoisted_7","_hoisted_8","_hoisted_9","$event","_vModelText","_hoisted_10","page","_vModelCheckbox","_hoisted_12","_hoisted_13","_hoisted_14"],"mappings":"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"}